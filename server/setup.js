/**
 * CampusBot Pro â€” First-time Setup Script
 * Run: node setup.js
 * 
 * This creates your .env file interactively
 */

const fs   = require('fs');
const path = require('path');
const readline = require('readline');

const rl = readline.createInterface({ input: process.stdin, output: process.stdout });
const ask = (q) => new Promise(resolve => rl.question(q, resolve));

async function setup() {
  console.log(`
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   ðŸŽ“ CampusBot Pro â€” First Time Setup   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

I'll help you create your .env file.
You need 2 things ready:
  1. MongoDB Atlas connection string
  2. Google Gemini API key

Press Enter to skip any field and fill it later.
`);

  const mongoUri     = await ask('ðŸ“¦ MongoDB URI: ');
  const geminiKey    = await ask('ðŸ¤– Gemini API Key: ');
  const port         = await ask('ðŸ”Œ Port (press Enter for 5000): ') || '5000';

  const envContent = `# CampusBot Pro â€” generated by setup.js
MONGO_URI=${mongoUri || 'YOUR_MONGODB_URI_HERE'}
GEMINI_API_KEY=${geminiKey || 'YOUR_GEMINI_KEY_HERE'}
PORT=${port}
NODE_ENV=development
CLIENT_URL=http://localhost:5173
`;

  const envPath = path.join(__dirname, '.env');
  fs.writeFileSync(envPath, envContent);
  rl.close();

  console.log(`
âœ… .env file created successfully!

${!mongoUri    ? 'âš ï¸  Remember to fill in MONGO_URI in server/.env\n' : ''}${!geminiKey   ? 'âš ï¸  Remember to fill in GEMINI_API_KEY in server/.env\n' : ''}
Now run:  npm run dev
`);
}

setup().catch(err => { console.error(err); process.exit(1); });
